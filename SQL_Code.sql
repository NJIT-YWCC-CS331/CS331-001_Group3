--CREATING DATABASE AND TABLES

CREATE TABLE STORE_ADMIN (
    Admin_ID        CHAR(6)        NOT NULL,
    Admin_name      VARCHAR(70)     NOT NULL,
    Log_cred        VARCHAR(50)     NOT NULL,
    PRIMARY KEY(Admin_ID)
);

CREATE TABLE CUSTOMER (
    Cust_ID         CHAR(7)        NOT NULL,
    Cust_name       VARCHAR(70)     NOT NULL,
    Cust_address    VARCHAR(200),
    Reg_Date        DATE            NOT NULL,
    Cust_phone_no   CHAR(10),
    PRIMARY KEY(Cust_ID)
);

CREATE TABLE AUTHOR (
    Auth_ID         CHAR(7)        NOT NULL,
    Auth_name       VARCHAR(70)     NOT NULL,
    Nationality     VARCHAR(20),
    Biography       VARCHAR(500),
    PRIMARY KEY(Auth_ID)
);

CREATE TABLE BOOK (
    ISBN            CHAR(7)        NOT NULL,
    Title           VARCHAR(200)    NOT NULL,
    Price           DECIMAL(6,2),
    Stk_Quant       INT,
    Pub_Year        DECIMAL(4),
    Edtn            INT,
    Book_mgrID      CHAR(6),
    PRIMARY KEY(ISBN),
    FOREIGN KEY(Book_mgrID) REFERENCES STORE_ADMIN(Admin_ID)
        ON DELETE SET NULL
);

CREATE TABLE REVIEW (
    ReviewerID      CHAR(7)        NOT NULL,
    ReviewedID      CHAR(7)        NOT NULL,
    Rating          INT             NOT NULL,
    Commentary      VARCHAR(200),
    PRIMARY KEY(ReviewerID, ReviewedID),
    FOREIGN KEY(ReviewerID) REFERENCES CUSTOMER(Cust_ID)
        ON DELETE CASCADE,
    FOREIGN KEY(ReviewedID) REFERENCES BOOK(ISBN)
        ON DELETE CASCADE
);

CREATE TABLE WRITES (
    Work_ID         CHAR(7)        NOT NULL,
    Writer_ID       CHAR(7)        NOT NULL,
    PRIMARY KEY(Work_ID, Writer_ID),
    FOREIGN KEY(Work_ID) REFERENCES BOOK(ISBN)
        ON DELETE CASCADE,
    FOREIGN KEY(Writer_ID) REFERENCES AUTHOR(Auth_ID)
        ON DELETE CASCADE
);

CREATE TABLE CATEGORY_GENRE (
    Cat_ID          CHAR(6)        NOT NULL,
    Cat_Name        VARCHAR(75)     NOT NULL,
    Cat_mgrID       CHAR(6),
    PRIMARY KEY(Cat_ID),
    FOREIGN KEY(Cat_mgrID) REFERENCES STORE_ADMIN(Admin_ID)
        ON DELETE SET NULL
);

CREATE TABLE CATEGORIZATION (
    Cgz_catID       CHAR(6)        NOT NULL,
    Cgz_bookID      CHAR(7)        NOT NULL,
    PRIMARY KEY(Cgz_catID, Cgz_bookID),
    FOREIGN KEY(Cgz_catID) REFERENCES CATEGORY_GENRE(Cat_ID)
        ON DELETE CASCADE,
    FOREIGN KEY(Cgz_bookID) REFERENCES BOOK(ISBN)
        ON DELETE CASCADE
);

CREATE TABLE STORE_ORDER (
    Ord_ID          CHAR(6)        NOT NULL,
    Ord_date        DATE            NOT NULL,
    Tot_amount        DECIMAL(8,2)    NOT NULL,
    Ship_Status     VARCHAR(50),
    Related_payID   CHAR(6),
    Placer_ID       CHAR(7),
    Ord_mgrID       CHAR(6),
    PRIMARY KEY(Ord_ID),
    FOREIGN KEY(Placer_ID) REFERENCES CUSTOMER(Cust_ID) 
        ON DELETE SET NULL,
    FOREIGN KEY(Ord_mgrID) REFERENCES STORE_ADMIN(Admin_ID) 
        ON DELETE SET NULL
);

CREATE TABLE PAYMENT_REC (
    Pay_ID          CHAR(6)        NOT NULL,
    Amount          DECIMAL(8,2)    NOT NULL,
    Pay_Date        DATE,
    Related_ordID   CHAR(6),
    PRIMARY KEY(Pay_ID),
    FOREIGN KEY(Related_ordID) REFERENCES STORE_ORDER(Ord_ID)
        ON DELETE SET NULL
);

--INSERT STATEMENTS FOR STORE_ADMIN
INSERT INTO STORE_ADMIN VALUES ('ADM001', 'Theodore Franklin', 'Frank123001');
INSERT INTO STORE_ADMIN VALUES ('ADM002', 'Robert Tang', 'Tang456002');
INSERT INTO STORE_ADMIN VALUES ('ADM003', 'Maria Greer', 'Greer789003');
INSERT INTO STORE_ADMIN VALUES ('ADM004', 'Gabriel Gill', 'Gill1011004');
INSERT INTO STORE_ADMIN VALUES ('ADM005', 'Erin Burton', 'Burton1213005');
INSERT INTO STORE_ADMIN VALUES ('ADM006', 'Ali Khan', 'Khan1415006');


--INSERT STATEMENTS FOR CUSTOMER
INSERT INTO CUSTOMER VALUES ('CUST001', 'Armani Knight', '123 Brook Street', TO_DATE('2024-04-30', 'YYYY-MM-DD'), '6013895859');
INSERT INTO CUSTOMER VALUES ('CUST002', 'Catherine Martin', '281 West Street', TO_DATE('2024-07-09', 'YYYY-MM-DD'), '6012675837');
INSERT INTO CUSTOMER VALUES ('CUST003', 'Emmett Odom', '61 Lake Avenue', TO_DATE('2025-01-30', 'YYYY-MM-DD'), '6082534089');
INSERT INTO CUSTOMER VALUES ('CUST004', 'Simon Wells', '4329 Stones Lane', TO_DATE('2025-08-12', 'YYYY-MM-DD'), '2156705462');
INSERT INTO CUSTOMER VALUES ('CUST005', 'Leslie Brooks', '86 Lily Street', TO_DATE('2025-11-03', 'YYYY-MM-DD'), '6012564751');
INSERT INTO CUSTOMER VALUES ('CUST006', 'Elizabeth Smith', '321 Harvest Way', TO_DATE('2025-11-12', 'YYYY-MM-DD'), '6070934261');
INSERT INTO CUSTOMER VALUES ('CUST007', 'Myra Banks', '5431 Apple Avenue', TO_DATE('2025-11-16', 'YYYY-MM-DD'), '6098389578');


--INSERT STATEMENTS FOR STORE_ORDER
INSERT INTO STORE_ORDER VALUES ('ORD001', TO_DATE('2025-11-01', 'YYYY-MM-DD'), 12.99, 'Shipped', 'PAY001', 'CUST001', 'ADM001');
INSERT INTO STORE_ORDER VALUES ('ORD002', TO_DATE('2025-11-02', 'YYYY-MM-DD'), 13.99, 'Processing', 'PAY002', 'CUST002', 'ADM002');
INSERT INTO STORE_ORDER VALUES ('ORD003', TO_DATE('2025-11-03', 'YYYY-MM-DD'), 15.99, 'Delivered', 'PAY003', 'CUST003', 'ADM002');
INSERT INTO STORE_ORDER VALUES ('ORD004', TO_DATE('2025-11-04', 'YYYY-MM-DD'), 17.99, 'Delivered', 'PAY004', 'CUST005', 'ADM003');
INSERT INTO STORE_ORDER VALUES ('ORD005', TO_DATE('2025-11-05', 'YYYY-MM-DD'), 9.99, 'Shipped', 'PAY005', 'CUST001', 'ADM002');
INSERT INTO STORE_ORDER VALUES ('ORD006', TO_DATE('2025-11-06', 'YYYY-MM-DD'), 17.99, 'Cancelled', 'PAY006', 'CUST002', 'ADM001');
INSERT INTO STORE_ORDER VALUES ('ORD007', TO_DATE('2025-11-12', 'YYYY-MM-DD'), 10.99, 'Processing', 'PAY007', 'CUST007', 'ADM002');


--INSERT STATEMENTS FOR PAYMENT_REC
INSERT INTO PAYMENT_REC VALUES ('PAY001', 12.99, TO_DATE('2025-11-01', 'YYYY-MM-DD'), 'ORD001');
INSERT INTO PAYMENT_REC VALUES ('PAY002', 13.99, TO_DATE('2025-11-02', 'YYYY-MM-DD'), 'ORD002');
INSERT INTO PAYMENT_REC VALUES ('PAY003', 15.99, TO_DATE('2025-11-03','YYYY-MM-DD'), 'ORD003');
INSERT INTO PAYMENT_REC VALUES ('PAY004', 17.99, TO_DATE('2025-11-04','YYYY-MM-DD'), 'ORD004');
INSERT INTO PAYMENT_REC VALUES ('PAY005', 9.99, TO_DATE('2025-11-05','YYYY-MM-DD'), 'ORD005');
INSERT INTO PAYMENT_REC VALUES ('PAY006', 17.99, TO_DATE('2025-11-06','YYYY-MM-DD'), 'ORD006');
INSERT INTO PAYMENT_REC VALUES ('PAY007', 10.99, TO_DATE('2025-11-12','YYYY-MM-DD'), 'ORD007');


ALTER TABLE STORE_ORDER ADD CONSTRAINT RELATEDPAYREC FOREIGN KEY(Related_payID) REFERENCES PAYMENT_REC(Pay_ID)  ON DELETE SET NULL;

CREATE TABLE PAYMENT_METHOD (
    M_payID         CHAR(6)        NOT NULL,
    pay_Method      VARCHAR(30)     NOT NULL,
    Card_no         CHAR(16),
    PRIMARY KEY(M_PayID, pay_Method),
    FOREIGN KEY(M_payID) REFERENCES PAYMENT_REC(Pay_ID)
        ON DELETE CASCADE
);

CREATE TABLE ORDER_ITEM (
    Item_ordID      CHAR(6)        NOT NULL,
    Item_ID         CHAR(7)        NOT NULL,
    PRIMARY KEY(Item_ordID, Item_ID),
    FOREIGN KEY(Item_ordID) REFERENCES STORE_ORDER(Ord_ID)
        ON DELETE CASCADE,
    FOREIGN KEY(Item_ID) REFERENCES BOOK(ISBN)
        ON DELETE CASCADE
);



--INSERT STATEMENTS

--AUTHOR
INSERT INTO AUTHOR VALUES ('AUTH001', 'George Orwell', 'British', 'Author of 1984 and Animal Farm');
INSERT INTO AUTHOR VALUES ('AUTH002', 'J.R.R. Tolkien', 'South African', 'Author of Lord of the Rings and The Hobbit');
INSERT INTO AUTHOR VALUES ('AUTH003', 'Roald Dahl', 'British', 'Author of Matilda and Charlie and the Chocolate Factory');
INSERT INTO AUTHOR VALUES ('AUTH004', 'Jane Austen', 'British', 'Author of Pride and Prejudice');
INSERT INTO AUTHOR VALUES ('AUTH005', 'Stephen King', 'American', 'Author of IT');
INSERT INTO AUTHOR VALUES ('AUTH006', 'George R. R. Martin', 'American', 'Author of A Game of Thrones');
INSERT INTO AUTHOR VALUES ('AUTH007', 'Rick Riordan', 'American', 'Author of the Percy Jackson Series');
INSERT INTO AUTHOR VALUES ('AUTH008', 'Mark Twain', 'American', 'Author of the Adventures of Huckleberry Finn');


--BOOK
INSERT INTO BOOK VALUES ('ISBN001', '1984', 12.99, 113, 1949, 1, 'ADM001');
INSERT INTO BOOK VALUES ('ISBN002', 'The Hobbit', 13.99, 96, 1937, 1, 'ADM002');
INSERT INTO BOOK VALUES ('ISBN003', 'Matilda', 9.99, 36, 1988, 1, 'ADM003');
INSERT INTO BOOK VALUES ('ISBN004', 'Pride and Prejudice', 7.99, 89, 1813, 1, 'ADM004');
INSERT INTO BOOK VALUES ('ISBN005', 'IT', 15.99, 45, 1986, 1, 'ADM005');
INSERT INTO BOOK VALUES ('ISBN006', 'A Game of Thrones', 17.99, 52, 1996, 1, 'ADM002');
INSERT INTO BOOK VALUES ('ISBN007', 'Percy Jackson: The Lightning Thief', 10.99, 28, 2005, 1, 'ADM001');
INSERT INTO BOOK VALUES ('ISBN008', 'Adventures of Huckleberry Finn', 8.99, 68, 1884, 1, 'ADM004');

--REVIEW
INSERT INTO REVIEW VALUES ('CUST001', 'ISBN001', 5, 'A classic dystopian masterpiece'); 
INSERT INTO REVIEW VALUES ('CUST002', 'ISBN002', 4, 'A world fantasy where hobbits reside'); 
INSERT INTO REVIEW VALUES ('CUST003', 'ISBN003', 5, 'An amusing story for children'); 
INSERT INTO REVIEW VALUES ('CUST005', 'ISBN005', 3, 'A horror story that will haunt your dreams');
INSERT INTO REVIEW VALUES ('CUST006', 'ISBN006', 4, 'Epic fantasy saga');
INSERT INTO REVIEW VALUES ('CUST002', 'ISBN004', 4, 'Elegant and delightful novel');
INSERT INTO REVIEW VALUES ('CUST003', 'ISBN007', 4, 'A great novel for beginners');
INSERT INTO REVIEW VALUES ('CUST005', 'ISBN006', 5, 'One of my favorite reads');


--WRITES
INSERT INTO WRITES VALUES ('ISBN001', 'AUTH001');
INSERT INTO WRITES VALUES ('ISBN002', 'AUTH002');
INSERT INTO WRITES VALUES ('ISBN003', 'AUTH003');
INSERT INTO WRITES VALUES ('ISBN004', 'AUTH004');
INSERT INTO WRITES VALUES ('ISBN005', 'AUTH005');
INSERT INTO WRITES VALUES ('ISBN007', 'AUTH006');
INSERT INTO WRITES VALUES ('ISBN007', 'AUTH007');
INSERT INTO WRITES VALUES ('ISBN008', 'AUTH008');


--CATEGORY_GENRE
INSERT INTO CATEGORY_GENRE VALUES ('CAT001', 'Dystopian', 'ADM001');
INSERT INTO CATEGORY_GENRE VALUES ('CAT002', 'Fantasy', 'ADM002');
INSERT INTO CATEGORY_GENRE VALUES ('CAT003', 'Children', 'ADM003');
INSERT INTO CATEGORY_GENRE VALUES ('CAT004', 'Romance', 'ADM004');
INSERT INTO CATEGORY_GENRE VALUES ('CAT005', 'Horror', 'ADM005');
INSERT INTO CATEGORY_GENRE VALUES ('CAT006', 'Young Adult', 'ADM002');


--CATEGORIZATION
INSERT INTO CATEGORIZATION VALUES ('CAT001', 'ISBN001');
INSERT INTO CATEGORIZATION VALUES ('CAT002', 'ISBN002');
INSERT INTO CATEGORIZATION VALUES ('CAT003', 'ISBN003');
INSERT INTO CATEGORIZATION VALUES ('CAT004', 'ISBN004');
INSERT INTO CATEGORIZATION VALUES ('CAT005', 'ISBN005');
INSERT INTO CATEGORIZATION VALUES ('CAT006', 'ISBN006');
INSERT INTO CATEGORIZATION VALUES ('CAT001', 'ISBN007');
INSERT INTO CATEGORIZATION VALUES ('CAT006', 'ISBN008');


--PAYMENT_METHOD
INSERT INTO PAYMENT_METHOD VALUES ('PAY001', 'Credit Card','1234567890123456');
INSERT INTO PAYMENT_METHOD VALUES ('PAY002', 'Cash', NULL);
INSERT INTO PAYMENT_METHOD VALUES ('PAY003', 'PayPal',     '5645625727688368');
INSERT INTO PAYMENT_METHOD VALUES ('PAY004', 'Debit Card', '7893795979279717');
INSERT INTO PAYMENT_METHOD VALUES ('PAY005', 'Cash', NULL);
INSERT INTO PAYMENT_METHOD VALUES ('PAY006', 'Apple Pay',  '8909387279891900');
INSERT INTO PAYMENT_METHOD VALUES ('PAY007', 'Gift Card',  '8375997992787456');


--ORDER_ITEM
INSERT INTO ORDER_ITEM VALUES ('ORD001', 'ISBN001');
INSERT INTO ORDER_ITEM VALUES ('ORD002', 'ISBN002');
INSERT INTO ORDER_ITEM VALUES ('ORD003', 'ISBN003');
INSERT INTO ORDER_ITEM VALUES ('ORD004', 'ISBN005');
INSERT INTO ORDER_ITEM VALUES ('ORD004', 'ISBN002');
INSERT INTO ORDER_ITEM VALUES ('ORD005', 'ISBN006');
INSERT INTO ORDER_ITEM VALUES ('ORD006', 'ISBN007');
